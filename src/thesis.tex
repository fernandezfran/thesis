% Copyright (c) 2024, Francisco Fernandez
% License: CC BY-SA 4.0
%   https://github.com/fernandezfran/thesis/blob/main/LICENSE
\documentclass[12pt, spanish, a4paper, twoside]{book}
\usepackage[spanish, es-nodecimaldot]{babel}

\usepackage{xcolor}
\definecolor{mycolor}{RGB}{31, 119, 180}

% TODO color, \change para cambiar
\newcommand{\todo}[1]{\textcolor{red}{#1}}
\newcommand{\done}[1]{\textcolor{blue}{#1}}
\newcommand{\change}[1]{\textcolor{black}{#1}}

% estilo de pagina

%% margenes
\usepackage{geometry}
\geometry{
	a4paper,
	total={170mm,257mm},
	left=20mm,
	top=20mm,
}

%% sangría
\setlength\parindent{12pt}

%% interlineado
\usepackage{setspace}
\onehalfspacing

%% palatino font type
\usepackage[T1]{fontenc}
\usepackage{mathpazo}

%% poder definir margenes de un parrafo (adjustwidth)
\usepackage{changepage}

%% encabezados de las páginas
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}

%%% línea horizontal superior
\let\oldheadrule\headrule
\renewcommand{\headrule}{\color{mycolor}\oldheadrule}
\renewcommand{\headrulewidth}{0.8pt}

%%% header
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}}
\fancyhead[CE]{\footnotesize\color{mycolor}\normalfont\bfseries\itshape\nouppercase{
    \textsc{\leftmark}}
}
\fancyhead[CO]{\footnotesize\color{mycolor}\normalfont\bfseries\itshape\nouppercase{
    \textsc{\rightmark}}
}

%%% footer
\fancyfoot[CE,CO]{\color{mycolor}\bfseries\thepage}

%% carátula de capítulo
\usepackage{sectsty}
\usepackage{titlesec}
\titleformat{\chapter}
    [display]
    {\centering\Huge\bfseries\color{mycolor}}
    {\chaptername\ \thechapter}
    {0pt}
    {\huge}

%% color de las secciones
\partfont{\color{mycolor}}
\sectionfont{\color{mycolor}}
\subsectionfont{\color{mycolor}}
\subsubsectionfont{\color{mycolor}}
\let\oldtextbf\textbf
\renewcommand{\textbf}[1]{\textcolor{mycolor}{\oldtextbf{#1}}}

%% línea horizontal debajo de las secciones
\titleformat{\section}
  {\normalfont\Large\bfseries\color{mycolor}}
  {\thesection}{1em}{}[{\titlerule[0.8pt]}]

%% index
\usepackage{imakeidx}
\makeindex[columns=3, title=Alphabetical Index, intoc]

%% show subsubsections in TOC
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{4}

%% Bibliografía por capítulo
% \usepackage[square,numbers,sort,sectionbib]{natbib}
% \usepackage{chapterbib}
\usepackage[square]{natbib}
\usepackage{tocbibind}
\renewcommand{\cite}{\citep}

%% defino pagina en blanco
\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage
}

% para borrar los items de itemize
\renewenvironment{itemize}{
\begin{list}{}{
\setlength{\leftmargin}{1.5em}
}
}{
\end{list}
}

% para, desde el índice, poder clickear a que página ir
\usepackage[breaklinks=true, hidelinks]{hyperref} 

% \say para las comillas
\usepackage{dirtytalk}

% para agregar imagenes (includegraphics)
\usepackage{graphicx}
\graphicspath{{./}}
% \usepackage{subcaption}

%% para acomodar mejor las posiciones de figuras/tablas
\usepackage{float}

% para algunos símbolos en las ecuaciones
\usepackage[fleqn]{amsmath} 
\setlength{\mathindent}{24pt}
\usepackage{mathabx}

% tabla en vez de cuadro
\usepackage[tableposition=top, labelfont={color=mycolor,bf}]{caption}
\addto\captionsspanish{
    \def\listtablename{\'Indice de tablas}%
    \def\tablename{Tabla}
}

%% para poder separar los títulos en dos renglones
\usepackage{adjustbox}
\usepackage{mathtools}
\usepackage{array}
\usepackage{makecell,booktabs}
\usepackage{stackengine}
\setstackEOL{\cr} %EOL is abbreviation for "end of line."

\usepackage{colortbl}
\arrayrulecolor{mycolor}

% para agregar código Python
\usepackage{listings}
\definecolor{code-green}{RGB}{44, 160, 44}
\definecolor{code-magenta}{RGB}{227, 119, 194}
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{white},
    commentstyle=\color{code-magenta},
    keywordstyle=\color{mycolor},
    stringstyle=\color{code-green},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    extendedchars=true,
    tabsize=4
}

\lstset{
    style=mystyle,
    literate=
    {á}{{\'a}}1
    {é}{{\'e}}1
    {í}{{\'i}}1
    {ó}{{\'o}}1
    {ú}{{\'u}}1
}


\begin{document}

\frontmatter % enumeración de las primeras páginas con números romanos

% \blankpage
% \blankpage
% \blankpage
% \blankpage % agregar hojas en blanco para imprimir

\input{Caratula/caratula.tex}

\input{Resumenes/resumen.tex}

\input{Resumenes/abstract.tex}

% Dedicatoria

\tableofcontents

\mainmatter % a partir de acá se cuentan los números de las páginas en formato arabico


\part{Motivación y fundamentos}

\input{Introduccion/introduccion.tex}

\input{Metodos/metodos.tex}


\part{Carga rápida de baterías de ion-litio}\label{p:fast-charging}

\input{FastCharging/un/un.tex}

\input{FastCharging/umbem/umbem.tex}


\part{Silicio como ánodo de baterías de ion-litio de próxima generación: Estudio de sus aleaciones}\label{p:silicio}

\input{Silicio/caracterizacion/caracterizacion.tex}

\input{Silicio/modelo/modelo.tex}

\input{Silicio/prediccion/prediccion.tex}


\part{Comentarios finales}

\input{Comentarios/comentarios.tex}


\part{Apéndices}

\appendix
\renewcommand\chaptername{Apéndice}
\input{Apendices/software.tex}


\bibliographystyle{apalike}
\bibliography{citas}

\end{document}
